<!DOCTYPE html>
<HTML>
<HEAD>
  <TITLE>alti+server</TITLE>
  <STYLE>
    body {
      background: black; color: lime;
      max-width: 1024px; width: 95%; margin: auto;
    }
    h1 { margin-top: 3ex; margin-bottom: 2ex; }
    a:link, a:visited { color: cyan; }
    a:link:hover, a:visited:hover { color: orange; }
    table { margin: 4ex; border-collapse: separate; border-spacing: 1ex; }
    th { border-radius: 6px 6px 6px 6px; font-size: 120%; padding: 1ex; text-align: left; background: green; color: black; }
    td { padding: 1ex; vertical-align: top; }
    hr { color: green; }
    span.foot { white-space: nowrap; }
    span.foot:before { content: '\2022'; padding: 2ex; }
  </STYLE>
</HEAD>
<BODY>
  <H1>alti+server: altitude + a little extra</H1>

  <H2>Non-standard Server Commands for users</H2>
  <TABLE>
    <TR><TH>Command</TH><TH>Args</TH><TH>Description</TH></TR>
    <TR>
      <TD>/switch</TD>
      <TD></TD>
      <TD>
        This command is useful for Coop maps, it allows users who are
        assigned to the wrong team to spectate and choose the other side.
      </TD>
    </TR>
    <TR>
      <TD>/restartMap</TD>
      <TD></TD>
      <TD>
        This command is a front-end to <EM>/balanceTeams</EM>.  If you
        are the only person on a map, it will balanceTeams without the
        need for a vote.  If you are on a 1de, 1dm, etc. map and are one
        of the last two players still alive, you can run <EM>/restartMap</EM>
        and his will <EM>/balanceTeams</EM> without a vote.
      </TD>
    </TR>
    <TR>
      <TD>/mesg</TD>
      <TD>status</TD>
      <TD>
        The server has a private messaging feature designed to aid
        players in meeting goals or to talk privately with the
        map designer.  Howerver, to ensure this feature is not
        abused, this feature can be disabled via this command
        and it's argument.  <EM>status</EM> can be one of
        <EM>Yes</EM>, <EM>No</EM>, or <EM>?</EM> to turn messaging
        on, off, or query your message setting respectively.  This
        feature persists across maps and connections, but may be
        lost between physical server reboots.
      </TD>
    </TR>
    <TR>
      <TD>/talk</TD>
      <TD>nick text</TD>
      <TD>
        Send a private message to <EM>nick</EM>.  You do not have to be friends
        with <EM>nick</EM> to do so, but they can disable messaging with the
        "/mesg" command.  Abusers will be banned.
      </TD>
    </TR>
    <TR>
      <TD>/spawnZone</TD>
      <TD>zone</TD>
      <TD>
        When a player has a non-standard spawn zone, they can reset their
        spawn zone to the original map default by running
        <EM>/spawnZone start</EM>. Otherwise,
        this command works only if the server is in zone spawning mode.
        It allows players to choose which <EM>zone</EM> they will respawn
        into when they die.  Also, when players execute this command, they
        will automatically be removed from the map and a new spawn will be
        initiated in this <EM>zone</EM>.  All bars and powerups will be
        lost.
      </TD>
    </TR>
    <TR>
      <TD>/sz</TD>
      <TD>zone</TD>
      <TD>
        This is an alias for <EM>/spawnZone</EM>.
      </TD>
    </TR>
    <TR>
      <TD>/showPlayer</TD>
      <TD>player</TD>
      <TD>
        Show information about the player with the nickname <EM>player</EM>.
      </TD>
    </TR>
  </TABLE>

  <H2>Non-standard Server Commands for Map Makers</H2>
  <TABLE>
    <TR><TH>Command</TH><TH>Args</TH><TH>Description</TH></TR>
    <TR>
      <TD>/updateMapAltitudegame</TD>
      <TD>name</TD>
      <TD>
        Download the map <EM>name</EM> from
        <A HREF="http://altitudegame.com/map/">http://altitudegame.com/map/</A>
        and save it to the download area.  The name must be exacly the same
        as the linkable text of the altitude game map site.  The most
        recent version of the map will be downloaded.
 
        If the downloaded map is not currently listed in the server
        configuration file, it will be added.  However, the server must
        be restarted for the map to be added to the maplist and rotation.
      </TD>
    </TR>
    <TR>
      <TD>/updateMapAltituderank</TD>
      <TD>name</TD>
      <TD>
        Download the map <EM>name</EM> from
        <A HREF="http://altituderank.com/">http://altituderank.com/</A>
        and save it to the download area.  The name ust be exacly the same
        as the name of the file but without the <CODE>.altx</CODE> extension.
 
        If the downloaded map is not currently listed in the server
        configuration file, it will be added.  However, the server must
        be restarted for the map to be added to the maplist and rotation.
      </TD>
    </TR>
    <TR>
      <TD>/updateMapURL</TD>
      <TD>name URL</TD>
      <TD>
        Download a map from <EM>URL</EM> and save it as <EM>name</EM>.
        You do not need to specify an extension for the map, nor do you
        need to specify a location.  The map will be stored in the
        <CODE>download</CODE> directory.  The URL given may be an HTTP
        redirect, tinyurl, etc.  The URL given cannot require user
        interaction, or contain a javascript based redirect.  If you
        attempt to download a file which with a javascript URL, the
        HTML containing the javascript will instead be downloaded.  This
        will be detected, and the download will be aborted.

        If the downloaded map is not currently listed in the server
        configuration file, it will be added.  However, the server must
        be restarted for the map to be added to the maplist and rotation.
      </TD>
    </TR>
    <TR>
      <TD>/removeMap</TD>
      <TD>name</TD>
      <TD>
        Remove the map named <EM>name</EM>.  The map file will be removed
        from the server, and it will also be removed from the maplist and
        rotation.  This will not be fully implemented until the server
        is restarted, which should always be done after removing a map.
      </TD>
    </TR>
    <TR>
      <TD>/digest</TD>
      <TD>type</TD>
      <TD>
        Generate a checksum of the mapfile being used for the current
        map.  This can be used  to verify a mapfile is accurate.
        <EM>type</EM> can be one of <EM>crc32</EM>, <EM>md5</EM>,
        <EM>sha1</EM>, or <EM>sha256</EM>.
      </TD>
    </TR>
    <TR>
      <TD>/restartServer</TD>
      <TD></TD>
      <TD>
        Restart the server.   This will shut the currently running server
        down, and start a new one.  This should be used to load new maps
        or to re-load the configuration after a map has been deleted.
        If an update to an existing map is made, the server does not need
        to be restarted.
      </TD>
    </TR>
    <TR>
      <TD>/logPickups</TD>
      <TD></TD>
      <TD>
        Display the settings X and Y coordinates each time you pickup a
        powerup.  This is meant to make it easier to get the location of
        a powerup for portals and other geometry specific settings.
      </TD>
    </TR>
    <TR>
      <TD>/location</TD>
      <TD></TD>
      <TD>
        Display the settings X and Y coordinates of the plane where it
        is about to be.  You should probably be flying slowly when you
        run this command.
      </TD>
    </TR>
    <TR>
      <TD>/help</TD>
      <TD>setting</TD>
      <TD>
        Display a help message explaining the command-line parameters of
        settings commands.
        <EM>setting</EM> are:
          assignTeam
          ballScore
          cameraScale
          gameType
          gravity
          map
          planes
          planeScale
          portals
          powerups
          settings
          spawnType
          zones
      </TD>
    </TR>
    <TR>
      <TD>/list</TD>
      <TD>setting</TD>
      <TD>
        Display the value of <EM>setting</EM>.  This is sometimes a single
        value and other a list of values.  Currently valid choices for
        <EM>setting</EM> are:
          assignTeam
          ballScore
          cameraScale
          gameType
          gravity
          map
          planes
          planeScale
          portals
          powerups
          settings
          spawnType
          zones
      </TD>
    </TR>
    <TR>
      <TD>/unset</TD>
      <TD>setting</TD>
      <TD>
        Delete the value of <EM>setting</EM> and return the server to it's
        default state with respect to this setting.  For more information about
        what each setting does, see its "/set" description below.
        Currently valid choices for <EM>setting</EM> are:
          assignTeam
          ballScore
          cameraScale
          gameType
          gravity
          planes
          planeScale
          spawnType
      </TD>
    </TR>
    <TR>
      <TD>/set ballScore</TD>
      <TD>left<BR>right</TD>
      <TD>
        Set the <EM>left</EM> and <EM>right</EM> team initial scores
        respectively.  The purpose of this is if you wish to give one
        team a handicap, or in coop to make fewer than 6 scores win the game.
        If the scores are negative numbers, they are subtracted from
        the servers winning goal number.
      </TD>
    </TR>
    <TR>
      <TD>/set assignTeam</TD>
      <TD>team</TD>
      <TD>
        This command is used to configure a map to require players join
        a certain team.  The argument <EM>left</EM> forces players to
        the left team, the argument <EM>right</EM> forces them to the
        right team, and <EM>none</EM> disables the enforcement of a
        side for this map.  This command can only be used to update
        the current map in-use.  This feature is generally expected to
        be used with games of type "coop".  However, there is no enforcement
        of that as a requrement.
      </TD>
    </TR>
    <TR>
      <TD>/set planes</TD>
      <TD>planes</TD>
      <TD>
        This command is used to configure a map to require players to use
        a certain plane.  You can specify multiple allowed planes by seperating
        them with spaces or commas.  If you specify <EM>none</EM>, hen
        plane enforcement is discontinued.  Otherwise, <EM>plane</EM> can
        be one of: Loopy, Bomber, Explodet, Biplane, or Miranda.  Nicknames
        like whale and randa are also allowed.
        This command can only be used to update the current map in-use.
      </TD>
    </TR>
    <TR>
      <TD>/set gravity</TD>
      <TD>0-3</TD>
      <TD>
        Set the default gravity configuration for this map.  This setting
        will be kept between server restarts for this map.  If this map
        is removed from the server, the setting will be lost.
        This command can only be used to update the current map in-use.
        The numeric arguments correspond to the argument for the
        <EM>testGravityMode</EM>.
      </TD>
    </TR>
    <TR>
      <TD>/set cameraScale</TD>
      <TD>40-300</TD>
      <TD>
        Set the camera scale (zoom) level from anywhere between 40 and 300.
        The default is 100%, scale up or down from there.  This setting
        will automatically call <EM>testCameraViewScale</EM> to set the
        current scale, and it will update the server to make this setting
        each time the current map is loaded in the future.  This setting
        will persist across server restarts.  To set it back, you will
        want to re-run <EM>mapScaleCamera</EM> with an argument of <EM>100</EM>.
      </TD>
    </TR>
    <TR>
      <TD>/set planeScale</TD>
      <TD>40-300</TD>
      <TD>
        Set the plane scale level from anywhere between 40 and 300.
        The default is 100%, scale up or down from there.  This setting
        will automatically call <EM>testPlaneScale</EM> to set the
        current scale, and it will update the server to make this setting
        each time the current map is loaded in the future.  This setting
        will persist across server restarts.  To set it back, you will
        want to re-run <EM>mapScalePlane</EM> with an argument of <EM>100</EM>.
      </TD>
    </TR>
    <TR>
      <TD>/set spawnType</TD>
      <TD>type</TD>
      <TD>
        This specifies the <EM>type</EM> of respawning when a user
        dies, or requests to spawn.  The <EM>type</EM> can be any of
        the following:
        <EM>died</EM> (the location of last death),
        <EM>powerup</EM> (the location of their last, 
        <EM>health</EM> (the location of their last health powerup),
        <EM>zone</EM> (zone based spawning where uses can cange their spawn
          zone on demeand),
        <EM>near</EM> (nearest zone to a player when they die),
        <EM>portal</EM> (pre-defined specified health powerups cause a player
          to immediately respawn at a defined location),
        or <EM>normal</EM> (at the normal, map defined start).
        If users get into a bind, they can use "/sz start" to spawn in
        the normal location.
      </TD>
    </TR>
    <TR>
      <TD>/set gameType</TD>
      <TD>type</TD>
      <TD>
        Normally the type of a game is ascertained by te file name.  If that
        cannot be done properly, the game type can be set via this mechanism.
        Valid game types are: coop, flag, race, zone, std, or normal.
      </TD>
    </TR>
    <TR>
      <TD>/add portal</TD>
      <TD>name<BR>px<BR>py<BR>sx<BR>sy<BR>sa</TD>
      <TD>
        When a player auto-uses the health powerup located at <EM>px,py</EM>,
        then they are automatically transported to <EM>sx,sy</EM> and spawn
        at the angle <EM>sa</EM>.
        See <A HREF="#Angles">Angles</A> for more information.
      </TD>
    </TR>
    <TR>
      <TD>/del portal</TD>
      <TD>name</TD>
      <TD>
        Delete the portal named <EM>name</EM>.
      </TD>
    </TR>
    <TR>
      <TD>/add zone</TD>
      <TD>name<BR>team<BR>sx<BR>sy<BR>sa</TD>
      <TD>
        Create (or overwrite) a spawn zone named <EM>name</EM>.  When invoked,
        spawn users at coordinates <EM>sx,sy</EM> and at angle <EM>sa</EM>.
        Players must use "/spawnZone name" to change their spawn zone to
        this location.
        See <A HREF="#Angles">Angles</A> for more information.
      </TD>
    </TR>
    <TR>
      <TD>/del zone</TD>
      <TD>name<BR>[team]</TD>
      <TD>
        Delete the spawn zone named <EM>name</EM>.
      </TD>
    </TR>
    <TR>
      <TD>/add powerup</TD>
      <TD>name<BR>team<BR>X<BR>Y</TD>
      <TD>
        Specify that the flag for <EM>team</EM> should be at the <EM>X</EM>
        and <EM>Y<EM> coordinates.  If this flag is picked up by the 
        correct team, then that team earns a goal.  <EM>team</EM> can be one
        of left, &lt;, right, &gt;, or * (for both teams).
      </TD>
    </TR>
    <TR>
      <TD>/del powerup</TD>
      <TD>name<BR>team</TD>
      <TD>
        Delete the flag defined for <EM>team</EM>.
      </TD>
    </TR>
  </TABLE>

  <H3><A NAME='Angles'>Angles</A></H3>
  <P>
    There are a few server commands which allow you to specify the angle
    a plane should spawn in.  The following are allowed under such cases:
  </P>
  <TABLE>
    <TR><TH>Specification</TH><TH>Description</TH></TR>
    <TR>
      <TD>0 to 180</TD>
      <TD>
        The angle in degrees starting from 0 (facing right) to 180
        (facing left)
      </TD>
    </TR>
    <TR>
      <TD>-1 to -179</TD>
      <TD>
        The downward facing angles in degrees starting from -1 (very nearly
        facing right) to -179 (very nearly facing left).  The angle of
        -90 is straight down.
      </TD>
    </TR>
    <TR>
      <TD>181 to 359</TD>
      <TD>
        The downward facing angles in degrees.  These numbers are converted
        automatically to the correct -1 to -179 values where 181 is equivalent
        to -179, 270 is equivalent to -90, and 359 is equivalent to -1.
      </TD>
    </TR>
    <TR>
      <TD>right, up, left, down</TD>
      <TD>
        These directions are converted to 0, 90, 180, and -90 respectively.
      </TD>
    </TR>
    <TR>
      <TD>e, ne, n, nw, w, sw, s, se</TD>
      <TD>
        Compass directions which are converted to
        0, 45, 90, 135, 180, -135, -90, and -45 respectively.
      </TD>
    </TR>
  </TABLE>

  <H2>Snarky Server</H2>
  <P>
    The server is also configured to emit snarky comments from time to
    time about players choices of perks and skins as well as events.
    These are meant to be light-hearted, so please take them that way.
  </P>
  <P>
    The server will also sometimes help a play express his/her joy for
    a job well done.
  </P>
  <P>
    The server also gives out it's own awards at the end of a map, this
    is similar to what you will find on other server, but with funny
    names.
  </P>
  <TABLE>
    <TR><TH>Award</TH><TH>Description</TH></TR>
    <TR>
      <TD>Training&nbsp;Wheels&nbsp;Award</TD>
      <TD>
        This award goes to the player who crashes the most.
      </TD>
    </TR>
    <TR>
      <TD>Kenny McCormick Award</TD>
      <TD>
        This award goes to the player who dies the most, named after
        South Park character who can't make it to the end of an episode.
      </TD>
    </TR>
    <TR>
      <TD>Ball Hog Award</TD>
      <TD>
        This award goes to the player who holds onto the ball the most.
        Though slightly derogative souding, this can be a compliement.
      </TD>
    </TR>
    <TR>
    <TR>
      <TD>Sledge&nbsp;Hammer&nbsp;Award</TD>
      <TD>
        This award is named after the 1980's TV character who shot first
        and didn't bother to ask questions.  To paraphrase: guns don't kill
        people, bullets kill people.  This is for most damage dealt.
      </TD>
    </TR>
    <TR>
      <TD>Tank Award</TD>
      <TD>
        This award goes to the player who manages to sustain the most
        damage.  Every team needs a good tank.
      </TD>
    </TR>
    <TR>
      <TD>Best Ratio</TD>
      <TD>
        This award is given to the player who has the best final ratio
        of Kills to Deaths.  Players late to the game may scoop this award.
      </TD>
    </TR>
    <TR>
      <TD>Front Runner</TD>
      <TD>
        This award is given to the player who has is the first person on
        their team to get to the most checkpoints.
      </TD>
    </TR>
  </TABLE>

  <H2>Level Requirements</H2>
  <P>
    This server is meant to test out new maps, and that can't be done by
    inexperienced players, or players without at least a fully perked plane.
    As such, new players must collect all planes (level 21) before playing.
    Below level 21 players may spectate, but repeated attempts to join will
    result in a server kick.  Players who have recently Ace'd will need to
    fill out their loopy with a blue perk (level 8) to join the game.  Before
    then, they will be required to spectate.
  </P>

  <H2>Language</H2>
  <P>
    A small number of words which are perceived to be offensive or are often
    used by inflamitory players will result in an infraction, and the player
    will be warned.  After 10 infractions, the player will be kicked by the
    server.
  </P>

  <H2>alti+server code</H2>
  <P>
    The server code is available at <A HREF="alti+server">alti+server</A>.
    This code is freely usable for running other servers, or for copying
    code or concepts from or into other code bases.  You should also also
    review the <A HREF="custom_json_commands.txt">custom_json_commands.txt</A>
    file which goes along with it.
  </P>

  <H2>Extra Game Types</H2>
  <H3>Capture the Flag</H3>
  <P>
    There are number of options for game types which are different from what
    you would normally see.  Capture the flag games have a powerup which 
    is located in an area heavlily  protected by one team.  The power should
    only be accessible to the other team.  The server game mode must be "Ball",
    as each capture increases the goal count.  One variety of Flag capture is
    a 1-life version, where teams go head-to-head and is very similar to
    1dm.  Another allows re-spawns and is timed.  This mode type should 
    favor the defensive team, and a single capture (goal) should be sufficient
    for winning.  Capture the flag games can also be configured to allow
    both teams to score.  Hear, the game would be similar to tbd,  but withou
    a bomb to pickup.  This would hopefully get teams to work together better,
    instead of people grabbing the bomb and flying off by themselves without
    support.
  </P>

  <H3>Large Map Coops</H3>
  <P>
    Many new spawn options are available with the alti+server.  Players
    can be configured to spawn where they last died, to make continuation
    easier.  If that is too immidiate, players can spawn at the place
    of their last pickup, or health.  Coops can also be made more exciting
    by the use of devices like portals, to teleport players from one area
    to another.
  </P>

  <H3>Races</H3>
  <P>
    The Capture the Flag mode can be morphed into a race.  Two types of
    races would be interesting here, ffa where anyone can win, and tdm
    where there are two teams, each working together to beat the other.
  </P>

</BODY>
</HTML>
